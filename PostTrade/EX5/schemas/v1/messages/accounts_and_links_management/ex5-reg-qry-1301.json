{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "urn:a5x:ex5:schema:v1:accounts_and_links_management:ex5-reg-qry-13",
  "$metadata": {
    "domain": "accounts_and_links_management",
    "schemaId": "urn:a5x:ex5:schema:v1:accounts_and_links_management:ex5-reg-qry-13"
  },
  "title": "Account search Message",
  "description": "Search for multiple accounts with optional filtering criteria",
  "$comment": "All fields are optional filters. If no filters are provided, returns accounts belonging to the requesting participant. Returns results via file generation.",
  "type": "object",
  "properties": {
    "participantIdentification": {
      "$ref": "../../objects/business/PartyId.json",
      "description": "Participant identification using existing PartyId structure"
    },
    "accountType": {
      "type": "array",
      "items": {
        "$ref": "../../objects/business/ExternalCodeList.json",
        "$comment": "Consult External Code List table ExternalSecurityAccountTypeCode. Filter results to only include accounts of this specific type."
      },
      "description": "Type of account to search for",
      "maxItems": 50
    },
    "status": {
      "type": "array",
      "items": {
        "$ref": "../../objects/business/ExternalCodeList.json",
        "$comment": "Consult External Code List table ExternalStatusCode. If not provided, default is 6 (ATIVO)"
      },
      "description": "Status of account to search for",
      "maxItems": 50
    },
    "accountIdentification": {
      "type": "array",
      "items": {
        "$ref": "../../objects/business/AccountIdentification.json"
      },
      "description": "Account Id to search for",
      "maxItems": 1000
    },
    "documentIdentifier": {
      "type": "array",
      "items": {
        "$ref": "../../objects/business/DocumentIdentifier.json"
      },
      "description": "Document identifier to filter accounts by",
      "maxItems": 1000
    },
    "creationDate": {
      "$ref": "../../objects/business/DateRange.json",
      "description": "Creation date range of account"
    },
    "updateDate": {
      "$ref": "../../objects/business/DateRange.json",
      "description": "Update date range of account"
    }
  },
  "anyOf": [
    {
      "required": [
        "accountIdentification"
      ]
    },
    {
      "required": [
        "documentIdentifier"
      ]
    },
    {
      "required": [
        "creationDate"
      ]
    }
  ],
  "additionalProperties": false,
  "examples": [
    {
      "accountIdentification": [
        {
          "id": 123456789
        },
        {
          "id": 12345679
        }
      ],
      "updateDate": {
        "start": "2023-01-01",
        "end": "2023-01-31"
      },
      "documentIdentifier": [
        {
          "documentType": 5,
          "documentNumber": "12345678901"
        },
        {
          "documentType": 5,
          "documentNumber": "12345678902"
        }
      ]
    },
    {
      "creationDate": {
        "start": "2023-01-01",
        "end": "2023-01-31"
      },
      "status": [
        6,
        5
      ]
    }
  ]
}